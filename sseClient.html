<!DOCTYPE html>
<html>
<head>
	<title>SSE</title>
</head>
<body>
	<div id="result"></div>
	<script>
		var es = new EventSource('http://localhost:3000/events');
		es.onmessage = function(e){
			var resultElem = document.getElementById('result');
			var testNode = document.createTextNode(e.data);
			resultElem.appendChild(testNode);
		  console.log(e.data, e);
		};
		es.addEventListener('open', function (e) {
			console.log('connection was opened');
		});
		es.addEventListener('error', function (e) {
			console.log('connection was closed');
		});
		es.addEventListener('poke', function (e) {
			console.log('poke SSE', e.data);
		});
		function htmlDecode(input){
		  var e = document.createElement('div');
		  e.innerHTML = input;
		  return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
		}
	</script>
	<script src="./eventSourcePoly.js.js"></script>
	<!-- <script src="./eventSource.min.js"></script> -->
</body>
</html>